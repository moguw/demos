environment:  "uat2"
url: https://gateway-uat2.project-g66.com/graphql?source=gibbs
propertyId: &propertyId "eyJ0eXBlIjoiUHJvcGVydHkiLCJpZCI6NDB9"
academicYearId: &academicYearId "eyJ0eXBlIjoiUHJvcGVydHkiLCJpZCI6MTY0fQ=="
admin_login_user: 
- {"email": "support.uat1@student.com","password": "support.uat1@student.com"}
#tenancy Option 信息
startDate: &startDate "2023-09-03"
endDate: &endDate "2024-10-10"
validFrom: &validFrom "2023-09-02"
validTo: &validTo "2024-10-03"
chargingStartDate: &chargingStartDate "2023-09-03"
chargingEndDate: &chargingEndDate "2024-11-10"
firstDueDateDay: &firstDueDateDay "2023-12-03"
# mysql连接信息
mysql_host: '127.0.0.1'
mysql_user: 'all_rw'
mysql_passwd: 'LgeQXZXrd6'
mysql_port: 3409
# ssh连接信息
ssh_host: "bastion.project-g66.com"
ssh_port: 22
ssh_user: "dev"
ssh_private_key: "/Users/welcometoosl/Desktop/OfficeProject/Txt/privateKey.txt"
# ssh_private_key: /Users/lihao.wang/Desktop/Project/database/privateKey的副本.txt
charset: 'utf8'

######################################################################################################         
                                        # 测试用例 #        
######################################################################################################

test_login:
- {
# login sucess- 登录成功
    "case": {"id": "login_01"},
    "dependence_case": {"is_dependent": False},
    "args":{
        "email":  "support.uat1@student.com",
        "password": "support.uat1@student.com"
    },
    "response":{"apiName": login,"except_result": "sucess",
                "except_code": 200,"except_msg": "LoginPayload",
                "sql_query": ""}
       
}

- {
# login failed- 账号不正确
    "case": {"id": "login_02"},
    "dependence_case": {"is_dependent": False},
    "args":{
        "email": "testemail", 
        "password": "support.uat1@student.com"
    },
    "response":{"apiName": login,"except_result": "failed",
                "except_code": 200,"except_msg": "INVALID_CREDENTIALS",
                "sql_query": ""}
}

- {
# login failed- 密码不正确或者为空
    "case": {"id": "login_03"},
    "dependence_case": {"is_dependent": False},
    "args":{
        "email": "testemail", 
        "password": ""
    },
    "response":{"apiName": login,"except_result": "failed",
                "except_code": 200,"except_msg": "INVALID_INPUT_DATA",
                "sql_query": ""}
}

test_create_studentUser:
  - {
  # studentUser- 创建studentUser
        "case": {"id": "createUser_01"},
        "dependence_case": {"is_dependent": False},
        "args":{
            "propertyId": *propertyId,
            "email": "edison.wang+$randomNum@student.com",
            "firstName": "edison",
            "middleName": null,
            "lastName": "wang",
            "gender": "MALE",
            "heardSource": "ACCOMMODATION_FOR_STUDENTS"
            },
        "response":{
                    "apiName": createStudentUser,"except_result": "sucess",
                    "except_code": 200,"except_msg": "",
                    "sql_query": ""
                }
    }

test_create_academicYear:
  - {
  # academicyear- 创建Current的academicYear
        "case": {"id": "AY_01"},
        "dependence_case": {"is_dependent": False},
        "args":{
            "propertyId": *propertyId,
            "academicYear": {
                "name": "AY_01$randomNum",
                "fromYear": 2023,
                "status": CURRENT,
                "isInMinPrice": true
            }
        },
        "response":{
                    "apiName": createAcademicYear,"except_result": "sucess",
                    "except_code": 200,"except_msg": "'isCurrent': True",
                    "sql_query": "select * from g_configurations.academic_years where id = $id"
                }
    }
#   - {
#   # academicyear- 创建Past的academicYear
#         "case": {"id": "AY_02"},
#         "dependence_case": {"is_dependent": False},
#         "args":{
#             "propertyId": *propertyId,
#             "academicYear": {
#                 "name": "AY_02$randomNum",
#                 "fromYear": 2023,
#                 "status": PAST,
#                 "isInMinPrice": true
#             }
#         },
#         "response":{"apiName": createAcademicYear,"except_result": "sucess",
#                     "except_code": 200,"except_msg": "'isCurrent': False",
#                     "sql_query": "select * from g_configurations.academic_years where id = $id"
#                 }
#     }
#   - {
#   # academicyear- academicYear_name为空
#         "case": {"id": "AY_03"},
#         "dependence_case": {"is_dependent": False},
#         "args":{
#             "propertyId": *propertyId,
#             "academicYear": {
#                 "name": "",
#                 "fromYear": 2023,
#                 "status": CURRENT,
#                 "isInMinPrice": true
#             }
#         },
#         "response":{"apiName": createAcademicYear,"except_result": "failed",
#                     "except_code": 400,"except_msg": "cannot be an empty string"
#                 }
           
#     }

test_create_roomGroup:
# 创建roomGroup -创建成功
  - {
        "case": {"id": "RG_01"},
        "dependence_case": {"is_dependent": False},
        "args":{
            "propertyId": *propertyId,
            "name": "RG_01$randomNum"
        },
        "response":{"apiName": createRoomGroup,"except_result": "sucess",
                    "except_code": 200,"except_msg": "RoomGroup",
                    "sql_query": "select * from g_properties.room_groups where id = $id"
                }
    }
  

test_create_tenancyOptions:
# tenancyOptions- 创建DIRECT_LET，Fixed类型的tenancyOption
- {
    "case": {"id": "TO_01"},
    "dependence_case": {"is_dependent": True, "caseId": ["AY_01"],"key": ["academicYearId"]},
    "args":{
        "propertyId": *propertyId,
        "tenancyOption":{
            "academicYearId": "$academicYearId",
            "name": "TO_01$randomNum",
            "bookingCategory": "DIRECT_LET",
            "description": "description",
            "endDate": *endDate,
            "endDateType": "EQ",
            "taxRateType": "FOR_STUDENT",
            "freeCancelBehaviorType": "BEFORE",
            "freeCancelInterval": 1,
            "freeCancelPointType": "BOOKING_CONFIRMED_DATE",
            "intervalForTurnaround": 0,
            "roomGroupIds":[*roomGroupIds],
            "startDate": *startDate,
            "startDateType": "EQ",
            "tenancyLength": 403,
            "tenancyLengthType": "EQ",
            "tenancyType": "FIXED",
            "validFrom": *validFrom,
            "validTo": *validTo,
            "viewOnWebsite": True,
            "linkToNomination": false,
            "isDifferentChargingDate": true,
            "chargingStartDate": *chargingStartDate,
            "chargingEndDate": *chargingEndDate
        }
    },
    "response":{"apiName": createTenancyOption,"except_result": "sucess",
                "except_code": 200,"except_msg": "'viewOnWebsite': True",
                "sql_query": ""} 
    }
# tenancyOptions- 创建DIRECT_LET，Fixed类型的tenancyOption   
# - {   
#     "case": {"id": "TO_02"},
#     "dependence_case": {"is_dependent": True, "caseId": ["AY_01","RG_01"],"key": ["academicYearId","roomGroupIds"]},
#     "args":{
#         "propertyId": *propertyId,
#         "tenancyOption":{
#             "academicYearId": "$academicYearId",
#             "name": "test",
#             "bookingCategory": "DIRECT_LET",
#             "description": "description",
#             "endDate": "2023-11-02",
#             "endDateType": "EQ",
#             "freeCancelBehaviorType": "BEFORE",
#             "freeCancelInterval": 1,
#             "freeCancelPointType": "BOOKING_CONFIRMED_DATE",
#             "intervalForTurnaround": 0,
#             "roomGroupIds":["$roomGroupIds"],
#             "startDate": "2023-09-03",
#             "startDateType": "EQ",
#             "tenancyLength": 60,
#             "tenancyLengthType": "EQ",
#             "tenancyType": "FIXED",
#             "validFrom": "2023-09-02",
#             "validTo": "2023-10-03",
#             "viewOnWebsite": True,
#             "linkToNomination": true,
#             "isDifferentChargingDate": true,
#             "chargingStartDate": "2023-09-03",
#             "chargingEndDate": "2023-11-01"
#         }
#     },
#     "response":{"apiName": createTenancyOption,"except_result": "sucess",
#                 "except_code": 200,"except_msg": "TenancyOption",
#                 "sql_query": ""}
#     }
test_create_CustomizedInstallment: 
  - {
        "case": {"id": "createCustomizedInstallment_01"},
        "dependence_case": {"is_dependent": True,"caseId": ["AY_01","TO_01"],"key": ["academicYearId","tenancyOptionId"]},
        "args":{
                "propertyId": *propertyId,
                "input": {
                    "roundingRule": "ROUND_UP",
                    "roundingTo": "HUNDREDTHS",
                    "academicYearId": "$academicYearId",
                    "customizedRentType": "FIXED_NIGHTS",
                    "firstDueType": "CALENDAR_DATE",
                    "guarantorRequired": false,
                    "allowedAllGuarantorLocation": true,
                    "guarantorCountryIds": [],
                    "name": "CustomizedInstallment$randomNum",
                    "numberOfPlans": 2,
                    "tenancyOptionId": "$tenancyOptionId",
                    "viewOnWebsite": true,
                    "customizedPlans": [{"dueDate": *endDate, "value": 202}],
                    "firstDueDateDay": *firstDueDateDay,
                    "firstDueDateValue": 201
                }
        },
        "response":{"apiName": createCustomizedInstallment,"except_result": "sucess",
                    "except_code": 200,"except_msg": "id",
                    "sql_query": ""
                }
    }
test_init_RateCard:
# 初始化RateCards -初始化成功
  - {
        "case": {"id": "InitRC_01"},
        "dependence_case": {"is_dependent": True,"caseId": ["AY_01"],"key": ["academicYearId"]},
        "args":{
            "propertyId": *propertyId,
            "academicYearId": "$academicYearId"
        },
        "response":{"apiName": initRateCard,"except_result": "sucess",
                    "except_code": 200,"except_msg": "'success': True",
                    "sql_query": ""
                }
    }

test_get_RateCards:
# 获取RateCards -获取成功
  - {
        "case": {"id": "GetRC_01"},
        "dependence_case": {"is_dependent": True,"caseId": ["AY_01"],"key": ["academicYearId"]},
        "args":{
            "propertyId": *propertyId,
            "academicYearId": "$academicYearId"
        },
        "response":{"apiName": getRateCards,"type_name": "rateCards","except_result": "sucess","except_code": 200,"except_msg": "RateCard",
                    "sql_query": ""
                }
    }

test_update_MainCard:
# 创建RateCards -创建成功
  - {
        "case": {"id": "UpdateRC_01"},
        "dependence_case": {"is_dependent": True,"caseId": ["AY_01","GetRC_01"],"key": ["academicYearId","id"]},
        "args":{
            "propertyId": *propertyId,
            "cardConfig": {
                "academicYearId": "$academicYearId",
                "active": true,
                "basicTableData": [{"id": "eyJ0eXBlIjoiUm9vbVR5cGUiLCJpZCI6bnVsbH0=","prices": {"price": "12"}}],
                "id": "$id",
                "isPriceLimitation": false,
                "isSpecifyRoomType": false,
                "roomTypesUpdated": ["eyJ0eXBlIjoiUm9vbVR5cGUiLCJpZCI6bnVsbH0="]
            }
        },
        "response":{"apiName": updateMainCard,
                    "except_result": "sucess",
                    "except_code": 200,
                    "except_msg": "'active': True",
                    "sql_query": ""
                }
    }

test_create_AdditionalFee:
# 创建AdditionalFee -创建成功
  - {
        "case": {"id": "createAF_01"},
        "dependence_case": {"is_dependent": True,"caseId": ["AY_01"],"key": ["academicYearId"]},
        "args":{
                "propertyId": *propertyId,
                "academicYearId": "$academicYearId",
                "additionalFee": {
                        "name": "createAF_01$randomNum",
                        "description": "Des",
                        "dueDateInterval": 0,
                        "dueDateBehavior": "BEFORE",
                        "dueDatePoint": "BOOKING_CONFIRMED_DATE",
                        "amountType": "FIXED_NIGHTS",
                        "isSpecifyRoomType": false,
                        "salesItemId": *salesItemId,
                        "bookingCategory": "DIRECT_LET",
                        "isActivated": true,
                        "roundingRule": "ROUND_UP",
                        "roundingTo": "HUNDREDTHS",
                        "feature": null,
                        "linkToNomination": false,
                        "chargeScope": null,
                        "installmentApplicability": "NOT_SPECIFIC"
                },
                "tiers": [{
                    "from": null,
                    "to": null,
                    "id": "tiersId-0",
                    "prices": [{ "value": 100, "roomTypeId": null }]
                }]
            },
        "response":{"apiName": createAdditionalFee,
                    "except_result": "sucess",
                    "except_code": 200,
                    "except_msg": "'isActivated': True",
                    "sql_query": ""
                }
    }

test_Update_AcademicYearBookingStatus:
# 更新AcademicYearBookingStatus -更新成功
  - {
        "case": {"id": "UpdateAYStatus_01"},
        "dependence_case": {"is_dependent": True,"caseId": ["AY_01"],"key": ["id"]},
        "args":{
            "propertyId": *propertyId,
            "academicYear": {
                    "id": "$id",
                    "isEnabled": true
            }
        },
        "response":{"apiName": updateAcademicYearBookingStatus,
                    "except_result": "sucess",
                    "except_code": 200,
                    "except_msg": "'isCurrent': True",
                    "sql_query": ""
                }
    }

test_create_Booking:
# 创建Booking -创建成功
  - {
        "case": {"id": "createBooking_01"},
        "dependence_case": {"is_dependent": True,"caseId": ["AY_01","TO_01","createUser_01"],"key": ["academicYearId","tenancyOptionId","studentId"]},
        "args":{
            "propertyId": *propertyId,
            "input": {
                "academicYearId": "$academicYearId",
                "tenancyStartDate": *startDate,
                "tenancyEndDate": *endDate,
                "roomTypeId": *roomTypeId,
                "tenancyOptionId": "$tenancyOptionId",
                "studentId": "$studentId"
            }
        },
        "response":{"apiName": createBooking,
                    "except_result": "sucess",
                    "except_code": 200,
                    "except_msg": "'category': 'DIRECT_LET'",
                    "sql_query": ""
                }
    }

test_SelectBed:
# booking选择bed -select成功
  - {
        "case": {"id": "SelectBed_01"},
        "dependence_case": {"is_dependent": True,"caseId": ["createBooking_01"],"key": ["bookingId"]},
        "args":{
            "propertyId": *propertyId,
            "input": {
                "bookingId": "$bookingId",
                "bedId": *bedId
            }
        },
        "response":{"apiName": SelectBed,
                    "except_result": "sucess",
                    "except_code": 200,
                    "except_msg": "'status': 'ROOM_SELECTED'",
                    "sql_query": ""
                }
    }

test_get_InstallmentsForSelection:
  - {
        "case": {"id": "getInstallmentsForSelection_01"},
        "dependence_case": {"is_dependent": True,"caseId": ["TO_01","AY_01"],"key": ["tenancyOptionId","academicYearId"]},
        "args":{
            "propertyId": *propertyId,
            "filter": {
                "academicYearId": "$academicYearId",
                "tenancyOptionId": "$tenancyOptionId",
                "tenancyStartDate": *startDate,
                "tenancyEndDate": *endDate,
                "pricePerNightOriginal": 12,
                "roomTypeId": *roomTypeId,
                "services": []
            },
            "bookingCategory": "DIRECT_LET"
        },
        "response":{"apiName": getInstallmentsForSelection,
                    "except_result": "sucess",
                    "except_code": 200,
                    "except_msg": "installmentId",
                    "sql_query": ""
                }
    }
test_get_InstallmentWithPlans:
  - {
        "case": {"id": "getInstallmentWithPlans_01"},
        "dependence_case": {"is_dependent": True,"caseId": ["getInstallmentsForSelection_01","TO_01","createUser_01"],"key": ["installmentId","tenancyOptionId","studentId"]},
        "args":{
            "propertyId": *propertyId,
            "bookingCategory": "DIRECT_LET",
            "filter": {
                "installmentId": "$installmentId",
                "tenancyOptionId": "$tenancyOptionId",
                "tenancyStartDate": *startDate,
                "tenancyEndDate": *endDate,
                "studentId": "$studentId",
                "pricePerNightOriginal": 12,
                "services": [],
                "roomTypeId": *roomTypeId
            }
        },
        "response":{"apiName": getInstallmentWithPlans,
                    "except_result": "sucess",
                    "except_code": 200,
                    "except_msg": "totalPrice",
                    "sql_query": ""
                }
    }

test_SelectInstallment:
# booking选择bed -select成功
  - {
        "case": {"id": "SelectInstallment_01"},
        "dependence_case": {"is_dependent": True,"caseId": ["createBooking_01","getInstallmentsForSelection_01","getInstallmentWithPlans_01"],"key": ["bookingId","installmentId","installmentDataHash"]},
        "args":{
            "propertyId": *propertyId,
            "input": {
                "installmentDataHash": "$installmentDataHash",
                "installmentId": "$installmentId",
                "bookingId": "$bookingId"
            }
        },
        "response":{"apiName": selectInstallment,
                    "except_result": "sucess",
                    "except_code": 200,
                    "except_msg": "totalPrice",
                    "sql_query": ""
                }
    }